{"version":3,"sources":["../../../../src/components/Elements/FloatingContent/FloatingContent.js"],"names":["FloatingContent","props","trigger","isShown","onToggle","action","placement","offset","clickOutsideToToggle","children","className","rest","triggerWrapperRef","contentWrapperRef","elementStyle","setElementStyle","mouseIsHovering","setMouseHover","classList","calcPopupPosition","current","nextStyle","clickOutsideHandler","target","contains","document","addEventListener","removeEventListener","onMouseEnter","onMouseLeave","actions","onClick","undefined","propTypes","PropTypes","node","isRequired","func","bool","oneOf","Placement","number","defaultProps","React","memo"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Portal from '../_Portal/Portal';\nimport getElementAbsolutePosition from './getElementAbsolutePosition';\nimport { Placement, useWindowResize } from '../../../shared';\n\nimport './floating-content.scss';\n\n/**\n * A FloatingContent shows its own children components floating on a given trigger (possibly another React component).\n */\nconst FloatingContent = (props) => {\n  const {\n    trigger, isShown, onToggle, action, placement, offset, clickOutsideToToggle, children, className, ...rest\n  } = props;\n  const triggerWrapperRef = useRef(null);\n  const contentWrapperRef = useRef(null);\n  const [elementStyle, setElementStyle] = useState(null);\n  const [mouseIsHovering, setMouseHover] = useState(false);\n\n  const classList = classNames('bi bi-floater', {\n    'float-top-left': placement === 'top-left',\n    'float-top-center': placement === 'top-center',\n    'float-top-right': placement === 'top-right',\n    'float-left-center': placement === 'left-center',\n    'float-right-center': placement === 'right-center',\n    'float-bottom-left': placement === 'bottom-left',\n    'float-bottom-center': placement === 'bottom-center',\n    'float-bottom-right': placement === 'bottom-right',\n  }, className);\n\n  // Derives the component's position from the trigger's wrapper element then set it as elementStyle state.\n  const calcPopupPosition = () => {\n    if (isShown && triggerWrapperRef.current) {\n      const nextStyle = getElementAbsolutePosition(triggerWrapperRef.current, placement, offset);\n      setElementStyle(nextStyle);\n    }\n  };\n\n  // handles the clicks outside the floating content (and outside the current trigger)\n  const clickOutsideHandler = ({ target }) => {\n    if (isShown\n      && (triggerWrapperRef.current && !triggerWrapperRef.current.contains(target))\n      && (contentWrapperRef.current && !contentWrapperRef.current.contains(target))) {\n      onToggle();\n    }\n  };\n\n  // recalculates the component's position when one of the following props change\n  useEffect(calcPopupPosition, [isShown, offset, placement, children]);\n\n  // recalculates the component's position on window resize\n  useWindowResize(calcPopupPosition);\n\n  // adds the click event listener when clickOutsideToToggle is true and when action is click\n  useEffect(() => {\n    if (triggerWrapperRef.current && contentWrapperRef.current && clickOutsideToToggle && action === 'click') {\n      document.addEventListener('click', clickOutsideHandler);\n    }\n\n    return () => {\n      document.removeEventListener('click', clickOutsideHandler);\n    };\n  }, [triggerWrapperRef.current, contentWrapperRef.current]);\n\n  /**\n   * onMouseEnter and onMouseLeave functions are both used to handle the hover action by toggling the\n   * mouseIsHovering state and firing the onToggle callback\n   */\n  const onMouseEnter = () => {\n    if (!mouseIsHovering) {\n      setMouseHover(true);\n      onToggle();\n    }\n  };\n\n  const onMouseLeave = () => {\n    if (mouseIsHovering) {\n      setMouseHover(false);\n      onToggle();\n    }\n  };\n\n  const actions = {\n    onClick: action === 'click' ? onToggle : undefined,\n    onMouseEnter: (action === 'hover') ? onMouseEnter : undefined,\n    onMouseLeave: action === 'hover' ? onMouseLeave : undefined,\n  };\n\n  return (\n    <>\n      {/* To easily access the trigger's position we wrap it within a referenced span */}\n      <span className=\"bi-float-trigger\" ref={triggerWrapperRef} role=\"complementary\" {...actions}>\n        {trigger}\n      </span>\n      {!isShown ? null : (\n        <Portal id=\"bi-floats\">\n          {/* The floating content is shown within a Portal to avoid layout glitches */}\n          <div {...rest} className={classList} style={elementStyle} ref={contentWrapperRef}>\n            {children}\n          </div>\n        </Portal>\n      )}\n    </>\n  );\n};\n\nFloatingContent.propTypes = {\n  /**\n   * Defines the React node to apply the floating content to\n   */\n  trigger: PropTypes.node.isRequired,\n  /**\n   * Defines the callback to be performed each time the event defined by the `action` prop fires,\n   * by default a `click` event\n   */\n  onToggle: PropTypes.func.isRequired,\n  /**\n   * Defines whether the floating content is shown or not\n   */\n  isShown: PropTypes.bool,\n  /**\n   * Defines when to fire the onToggle callback, it can be `click` or `hover`\n   */\n  action: PropTypes.oneOf(['click', 'hover']),\n  /**\n   * If the `action` prop is set to `click`, it's possible to define if the `onToggle` callback should be performed\n   * when clicking outside of the trigger\n   */\n  clickOutsideToToggle: PropTypes.bool,\n  /**\n   * Defines the popup placement\n   */\n  placement: Placement,\n  /**\n   * Defines a number in pixel to possibly separate the popup from the trigger\n   */\n  offset: PropTypes.number,\n};\n\nFloatingContent.defaultProps = {\n  isShown: false,\n  action: 'click',\n  clickOutsideToToggle: true,\n  placement: 'top-center',\n  offset: 10,\n};\n\nexport default React.memo(FloatingContent);\n"],"file":"FloatingContent.js"}